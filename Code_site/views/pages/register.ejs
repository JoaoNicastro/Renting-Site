<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Include your head partial which contains the meta tags and stylesheets -->
    <%- include('../partials/head'); %>
</head>
<body>
    <!-- Include your menu partial -->


    <!-- Trigger Button for the Modal -->
    <button id="getStartedBtn" class="btn btn-primary btn-lg">Get Started</button>

    <!-- Multi-Step Modal Structure -->
    <div id="multiStepModal" class="modal">
        <!-- Modal content container -->
        <div class="modal-content">
            <!-- Close button -->
            <span class="close">&times;</span>

            <!-- Step indicator -->
            <div class="step-indicator">Step <span id="currentStep">1</span>/4</div>

            <!-- Dynamic modal body content -->
            <div id="modalBodyContent">
                <!-- Content for Step 1 will be loaded here initially -->
            </div>

            <!-- Modal footer with the Next button -->
            <div class="modal-footer">
                <button id="nextBtn" class="btn btn-primary">Next</button>
            </div>
        </div>
    </div>

    <!-- Include your footer partial -->
    <%- include('../partials/footer'); %>

    <!-- Include jQuery and other necessary scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>

      // Set your Mapbox access token
          mapboxgl.accessToken = 'pk.eyJ1IjoidW5pc3RheXMiLCJhIjoiY2x0cXNub3VtMDdvdDJpcnoxc2Npc2s5YSJ9.agPsL_8WDUTq8PDqpPZqbQ';

        // Get the modal element
        var modal = document.getElementById('myModal');
        // Get the button that opens the modal
        var btn = document.getElementById('myBtn');
        // Get the <span> element that closes the modal
        var span = document.getElementById('closeModal');
        // Get the map element
        var mapElement = document.getElementById('map');
        // Store the map object
        var map = null;

        // Function to initialize the map
        function initializeMap() {
          map = new mapboxgl.Map({
            container: 'map', // container id
            style: 'mapbox://styles/mapbox/streets-v11', // style URL
            center: [4.899, 52.372], // starting position [lng, lat]
            zoom: 9 // starting zoom
          });
        }

        $(document).ready(function() {
            var currentStep = 1;

            // Function to load content for the current step
            function loadStepContent(step) {
                var contentHtml = '';

                switch(step) {
                    case 1:
                        // Content for Step 1
                        contentHtml = `<h4>ðŸ”¥ With this search profile you can expect ... matches per week</h4>
                                       <input type="text" placeholder="Search city" />
                                       <select name="distance"><option value="<2km">< 2km</option></select>`;
                        break;
                    case 2:
                        // Content for Step 2
                        contentHtml = `<h4>ðŸ”¥ With this search profile you can expect ... matches per week</h4>
                                       <input type="number" placeholder="Minimum rental price" />
                                       <input type="number" placeholder="Maximum rental price" />
                                       <input type="number" placeholder="Minimum number of bedrooms" />`;
                        break;
                    case 3:
                        // Content for Step 3
                        contentHtml = `<h4>ðŸ”¥ With this search profile you can expect ... matches per week</h4>
                                       <select name="furnished"><option value="Doesn't matter">Doesn't matter</option></select>
                                       <div><input type="checkbox" /> Garden</div>
                                       <div><input type="checkbox" /> Balcony</div>`;
                        break;
                    case 4:
                        // Content for Step 4
                        contentHtml = `<h4>ðŸ”¥ With this search profile you can expect ... matches per week</h4>
                                       <input type="text" placeholder="First name" />
                                       <input type="text" placeholder="Email" />
                                       <input type="password" placeholder="Password" />`;
                        break;
                    // Add more cases if you have more steps
                }

                $('#modalBodyContent').html(contentHtml);
                $('#currentStep').text(step);
            }

            // Open modal on Get Started button click
            $('#getStartedBtn').on('click', function() {
                $('#multiStepModal').show();
                loadStepContent(currentStep); // Load the first step content
            });

            // Close modal on close button click
            $('.close').on('click', function() {
                $('#multiStepModal').hide();
            });

            // Handle the Next button click
            $('#nextBtn').on('click', function() {
                if (currentStep < 4) {
                    currentStep++;
                    loadStepContent(currentStep);
                } else {
                    // Submit the form or close the modal if you're on the last step
                    $('#multiStepModal').hide();
                    currentStep = 1; // Reset to first step for the next opening
                    // Here you should handle form submission or transition to the next page
                }
            });

            // Close modal when clicking outside of it
            $(window).on('click', function(event) {
                if ($(event.target).is('.modal')) {
                    $('#multiStepModal').hide();
                }
            });
        });
    </script>

<style>
  .modal {
    display: none;
    position: fixed;
    z-index: 2;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px;
  }

  .modal-content {
    display: flex;
    flex-direction: row;
    background-color: #fefefe;
    width: 949px;
    height: 652.23px;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    overflow: hidden;
  }
  .modal-left {
    width: 50%; /* Maintain the width for the left part of the modal */
    display: flex;
    flex-direction: column;
    justify-content: center; /* This will vertically center your search bar */
    align-items: center; /* This will horizontally center your search bar in the .modal-left container */
    padding: 20px; /* Adjust padding as needed */
  }

  #searchCityInput {
    width: 426.65px; /* Exact width for the search bar */
    height: 55.33px; /* Exact height for the search bar */
    padding: 10px; /* Adjust padding to ensure text is vertically centered */
    margin-bottom: 10px; /* Space below the search input */
    border: 1px solid #ccc; /* A subtle border */
    font-size: 16px; /* Sufficiently large font size for legibility */
    box-sizing: border-box; /* Include padding and border in the element's total width and height */
  }
  .modal-left, .modal-right {
    width: 50%;
  }

  #map {
    width: 100%;
    /* Adjust the height if necessary to work with your layout */
  }

  .modal-header, .modal-footer {
    padding: 20px;
  }

  .close {
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
  }

  .modal-footer {
    position: absolute;
    right: 10px;
    bottom: 10px;
  }

  #nextButton {
    border: none; 
    padding: 10px 20px;
  }
</style>

