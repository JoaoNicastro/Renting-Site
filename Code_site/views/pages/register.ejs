<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head'); %>

</head>
<body>
   

    <button id="getStartedBtn" class="btn btn-primary btn-lg">Get Started</button>

    <div id="multiStepModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="modal-header">
                <h2>Step <span id="currentStep">1</span>/4</h2>
            </div>
            <div id="modalBodyContent" class="modal-body">
                <!-- Content will be loaded dynamically -->
            </div>
            <div class="modal-footer">
                <button id="nextBtn" class="btn btn-primary">Next</button>
            </div>
        </div>
    </div>

    <!-- Include your footer partial -->
    <%- include('../partials/footer'); %>

    <!-- Include jQuery and other necessary scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
    <script>
  // Set your Mapbox access token
  mapboxgl.accessToken = 'pk.eyJ1IjoidW5pc3RheXMiLCJhIjoiY2x0cXNrcGNrMDlzbTJrcGUxMGNpZ3UzdSJ9.HgD1_IEIhHstVUu0OWTL2Q';

  // Function to initialize the map
  function initializeMap() {
            if (!document.getElementById('map')) return; // Only initialize if map element is present
            new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/streets-v11',
                center: [4.899, 52.372],
                zoom: 9
            });
        }

        $(document).ready(function() {
            var currentStep = 1;
            var isMapInitialized = false;

            // Function to load content for the current step
            function loadStepContent(step) {
                var contentHtml = '';
                $('#currentStep').text(step);

                switch(step) {
                    case 1:
                    ContentHtml += `<div id="map" style="width: 100%; height: 300px;"></div>`;
                        $('#modalBodyContent').html(contentHtml);
                        initializeMap(); // Initialize the map
                        break;
                    case 2:
                        // Content for Step 2
                        contentHtml += `<h4>ðŸ”¥ With this search profile you can expect ... matches per week</h4>
                                       <input type="number" placeholder="Minimum rental price" />
                                       <input type="number" placeholder="Maximum rental price" />
                                       <input type="number" placeholder="Minimum number of bedrooms" />`;
                                   
                        break;
                    case 3:
                        // Content for Step 3
                        contentHtml += `<h4>ðŸ”¥ With this search profile you can expect ... matches per week</h4>
                                       <select name="furnished"><option value="Doesn't matter">Doesn't matter</option></select>
                                       <div><input type="checkbox" /> Garden</div>
                                       <div><input type="checkbox" /> Balcony</div>`;
                        break;
                    case 4:
                        // Content for Step 4
                        contentHtml += `<h4>ðŸ”¥ With this search profile you can expect ... matches per week</h4>
                                       <input type="text" placeholder="First name" />
                                       <input type="text" placeholder="Email" />
                                       <input type="password" placeholder="Password" />`;
                        break;
                    // Add more cases if you have more steps
                }
                $('#modalBodyContent').html(contentHtml);
            }

            $('#getStartedBtn').click(function() {
                $('#multiStepModal').show();
                loadStepContent(currentStep);
            });

            // Close modal on close button click
            $('.close').on('click', function() {
                $('#multiStepModal').hide();
            });

            // Handle the Next button click
            $('#nextBtn').click(function() {
                if(currentStep < 4) {
                    currentStep++;
                    loadStepContent(currentStep);
                } else {
                    $('#multiStepModal').hide();
                    currentStep = 1;
                    $('#nextBtn').text('Next');
                    loadStepContent(currentStep);
                    // Here you would handle the final step's data submission.
                }
            });

            // Close modal when clicking outside of it
            $(window).on('click', function(event) {
                if ($(event.target).is('.modal')) {
                    $('#multiStepModal').hide();
                }
            });
        });
    </script>
  </body>
<style>
  .modal {
    display: none;
    position: fixed;
    z-index: 2;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px;
  }

  .modal-content {
    display: flex;
    flex-direction: row;
    background-color: #fefefe;
    width: 949px;
    height: 652.23px;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    overflow: hidden;
  }
  .modal-left {
    width: 50%; /* Maintain the width for the left part of the modal */
    display: flex;
    flex-direction: column;
    justify-content: center; /* This will vertically center your search bar */
    align-items: center; /* This will horizontally center your search bar in the .modal-left container */
    padding: 20px; /* Adjust padding as needed */
  }

  #searchCityInput {
    width: 426.65px; /* Exact width for the search bar */
    height: 55.33px; /* Exact height for the search bar */
    padding: 10px; /* Adjust padding to ensure text is vertically centered */
    margin-bottom: 10px; /* Space below the search input */
    border: 1px solid #ccc; /* A subtle border */
    font-size: 16px; /* Sufficiently large font size for legibility */
    box-sizing: border-box; /* Include padding and border in the element's total width and height */
  }
  .modal-left, .modal-right {
    width: 50%;
  }

  #map {
    width: 100%;
    /* Adjust the height if necessary to work with your layout */
  }

  .modal-header, .modal-footer {
    padding: 20px;
  }

  .close {
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
  }

  .modal-footer {
    position: absolute;
    right: 10px;
    bottom: 10px;
  }

  #nextButton {
    border: none; 
    padding: 10px 20px;
  }
</style>

